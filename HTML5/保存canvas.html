<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
	<title>canvas</title>
	<link rel="stylesheet" href="">
	<style>
		*{margin:0;padding:0;}


    </style>
</head>
<body>
<div id="main">

    <canvas id='canvas'></canvas>

</div>

<script>
  
    
    var cvs = document.getElementById('canvas');
    var context = cvs.getContext('2d');
    cvs.width = 500;
    cvs.height = 500;
    context.beginPath();
    context.moveTo(0,0);
    context.lineTo(500,0);
    context.lineTo(500,500);
    context.lineTo(0,500);
    context.lineWidth = 5;
    context.strokeStyle = 'red';
    context.stroke();

    context.beginPath();
    context.moveTo(100,100);
    context.lineTo(200,300);
    context.lineTo(100,300);
    context.fillStyle = 'red';
    context.fill();
    
    var img = new Image();
    img.src = 'images/img-lg.jpg';
    
    img.onload = function(){
        context.drawImage(this,100,100,100,100)
        
        var data= cvs.toDataURL("image/jpg").replace("image/jpg", "image/octet-stream"); 
        var bd = document.getElementsByTagName('body')[0];
        var p = document.createElement('img');
        p.src = data;
        bd.appendChild(p)
    }
    
</script>

</body>
</html>