<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>页面滚动特效</title>
<meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no"/> 
<script type="text/javascript" src="js/jquery.1.10.2.js"></script>
<script type="text/javascript" src="http://fm.ttpod.com/js/vendor/jquery.mousewheel/jquery.mousewheel.js"></script>
<script type="text/javascript" src="http://fm.ttpod.com/js/vendor/jquery.easing/jquery.easing.1.3.min.js"></script>
<link rel="stylesheet" type="text/css" href="animate.css">
<style>	
	* {margin:0; padding:0;}
	html,body{overflow-y:hidden; }
	body{position:relative; background:#fff; font-family: "微软雅黑" ;font-size:14px;}
	h1,h2,h3,h4,h5,h6 {font-size:14px; font-style: normal; font-weight:400;}
	li,ul {list-style:none;}
	a {text-decoration: none; color:#454545;}
	.w {zoom:1;}
	.w:after {content:"";  display: block; clear:both; height:0; }
	.clearfix:after {  content:'\0020';  display:block;  height:0;  clear:both;}
	#header {background:#222;}
	.header-c,.nav-c,.fixed-c,.w {width:1120px; margin:0 auto; }
	.header-top {overflow: hidden; _zoom:1; height: 100px;}
	.header-top span {float:left; margin:30px 0 0;}
	.header-top .menu {float:right; overflow: hidden; _zoom:1; margin-top:40px;}
	.header-top .menu li {float:left; margin-left:30px;}
	.header-top .menu li a {color:#fff;}
	.header-nav {height: 38px; background: url(http://static.smartisanos.cn/asset1415183749463/img/global-gray-bg.jpg) repeat-x; overflow: hidden; _zoom:1;}
	.header-nav .tool {float:left; margin-top:7px;}
	.header-nav .tool a,.fixed-c .f-l .tool a {font-size: 12px; color: #454545; margin-right: 30px;}
	.header-nav .r-login {float:right; margin-top:7px;}
	.header-nav .r-login a,.fixed-c .f-r a {font-size: 12px; margin: 0 10px; color: #454545;}
	.header-nav .r-login span { font-size:10px; color: #999;}

	.fixedTop {display:none; position: fixed; top:-50px; left:0; width:100%; background:rgba(255,255,255,.8); box-shadow:0 1px 5px rgba(0,0,0,.2); z-index:999}
	.fixed-c {overflow: hidden; _zoom:1; height:50px}
	.fixed-c .f-l {float:left; margin-top:13px;}
	.fixed-c .f-l .tool { margin-left:50px}
	.fixed-c .f-r {float: right;  margin-top:13px;}

	#wrap {overflow: hidden;}
	#wrap .section {position: relative; overflow: hidden;}
	#wrap .section1 {background:blue}	
	#wrap .section2 {background:#ff6600}	
	#wrap .section3 {background:green}	
	#wrap .section4 {background:orange}	
	#wrap .section5 {background:#f1f1f1}	
	#wrap .section6 {background:#169}	
	#navLi {position: fixed; right:50px; top:50%;}
	#navLi li {width:15px; height:15px; background-color:red; border-radius: 50%; margin:5px 0; text-indent: -9999px; }
	#navLi li.current {background-color:#369}

	.ft-top {background:#fff; padding:25px 0;}
	.ft-top .b-l {float:left; width:850px;}
	.ft-top .b-l dl {float: left; width: 33.33%}
	.ft-top .b-l dt {font-size:20px; line-height: 28px; padding-bottom: 20px}
	.ft-top .b-l dd span {display: block;}
	.ft-top .b-l dd span a {font-size: 12px; line-height:25px;}
	.ft-top .b-r {margin-left:850px; overflow: hidden; text-align: right;}
	.ft-top .b-r h5 a {display:inline-block; background:#369; color:#fff; border-radius:5px; padding:8px 40px;}
	.ft-top .b-r p.tel {padding:15px 0; font-size:24px; line-height: 30px; color:#999;}
	.ft-top .b-r p.t-b {font-size:12px; color:#999;}
	.ft-b {background: #f1f1f1; padding: 15px 0; font-size:12px}
	.ft-b .b-l {float: left;}
	.ft-b .b-l a{font-size:10px; margin-top:5px;}
	.ft-b .b-m {float: left; margin-left:50px;}
	.ft-b .b-m a {font-size: 14px; color:#369; display: inline-block; margin-left:10px;}
	.ft-b .b-r {float: right;}
</style>
</head>
<body>
	<div id="header">
		<div class="header-c">
			<div class="header-top">
				<span><img src="http://static.smartisanos.cn/asset1415183749463/img/logo.png" width="161" height="38"></span>
				<ul class="menu">
					<li><a href="#">首页</a></li>
					<li><a href="#">Smartisan T1</a></li>
					<li><a href="#">在线商城</a></li>
					<li><a href="#">补购保修服务</a></li>
					<li><a href="#">立即购买 T1</a></li>
				</ul>
			</div>
		</div>
		<div class="header-nav">
			<div class="nav-c">
				<span class="tool">
					<a href="#">概览</a>
					<a href="#">设计</a>
					<a href="#">功能</a>
					<a href="#">操作系统</a>
					<a href="#">技术规格</a>
				</span>
				<span class="r-login">
					<a href="#">登录</a><span>|</span><a href="#">注册</a>
				</span>
			</div>
		</div>		
	</div><!--header-->

	<div class="fixedTop">
		<div class="fixed-c">
			<div class="f-l">
				<span><img src="http://static.smartisanos.cn/asset1415183749463/img/product_image/product-title-bg.png"></span>
				<span class="tool">
					<a href="#">概览</a>
					<a href="#">设计</a>
					<a href="#">功能</a>
					<a href="#">操作系统</a>
					<a href="#">技术规格</a>
				</span>
			</div>
			<span class="f-r">
				<a href="#">补购保修服务</a><a href="#">立即购买 T1</a>
			</span>
		</div>
	</div>

	<div id="wrap">
		<div class="section section1">1</div>
		<div class="section section2">2</div>
		<div class="section section3">3</div>
		<div class="section section4">4</div>
		<div class="section section5">5</div>
		<div class="section section6">6</div>
	</div><!--wrap-->

	<div id="footer">
		<div class="ft-top">
			<div class="w">
				<div class="b-l">
					<dl>
						<dt>订单服务</dt>
						<dd>
							<span><a href="#">购买指南</a></span>
							<span><a href="#">支付方式</a></span>
							<span><a href="#">优先购买通道</a></span>
						</dd>
					</dl>
					<dl>
						<dt>服务与支持</dt>
						<dd>
							<span><a href="#">售后服务</a></span>
							<span><a href="#">常见问题</a></span>
							<span><a href="#">补购保修服务</a></span>
						</dd>
					</dl>
					<dl>
						<dt>关于公司</dt>
						<dd>
							<span><a href="#">公司简介</a></span>
							<span><a href="#">加入我们</a></span>
							<span><a href="#">新闻动态</a></span>
						</dd>
					</dl>
				</div>
				<div class="b-r">
					<h5><a href="#">在线咨询</a></h5>
					<p class="tel">400-619-0909</p>
					<p class="t-b">周一至周日 9:00-18:00（仅收市话费）</p>
				</div>
			</div>
		</div><!--ft-top-->
		<div class="ft-b">
			<div class="w">
				<span class="b-l">
					Copyright © 2014, Smartisan Digital Co., Ltd. All Rights Reserved. 北京锤子数码科技有限公司<br/>
					<a href="#">京ICP备14041720号-1 京公网安备11010502025474</a>
				</span>
				<span class="b-m">
					<a href="#">网站使用条款</a>
					<a href="#">隐私条款</a>
				</span>
				<span class="b-r">
					<a href="#">微信</a>
					<a href="#">微博</a>
				</span>
			</div>
		</div><!--ft-b-->
	</div>

	<script type="text/javascript">
		(function(a,b){
			var winH=function(){
				return b.documentElement.clientHeight || b.document.body.clientHeight;
			}
			var h=winH(),
				wrap=a('#wrap'),
				section=wrap.children('.section'),
				t=a('#header'),
				tH=t[0].offsetHeight,
				f=a('.fixedTop'),
				bottom=a('#footer'),
				bH=bottom[0].offsetHeight,
				index=0,
				timer=null,
				nav=function(){
					var nav=document.createElement('ul');
					nav.setAttribute('id','navLi');
					var liHtml=''
					for (var i = 0; i < section.length; i++) {
						liHtml += '<li>'+i+'</li>'
					};
					nav.innerHTML=liHtml;							
					document.body.appendChild(nav)
					a('#navLi').find('li').eq(0).addClass('current')
				};
			function setH(h){
				a.each(section,function(i,n){
					a(n).height(h)
					
				})
			}
			//document.body.style.height=h+'px',
			setH(winH()),
			nav(),
			a(document).on('mousewheel',wheel);
			/*setTimeout(function(){
				a('body,html').animate({scrollTop:0}, 1,function(){})
			},100)*/
			function wheel(e, a){
				
				timer || (timer=setTimeout(function(){
					timer=null
				},500),goPage(a))
			}

			a('#navLi').on('click','li',function(){
				index=a('#navLi').find('li').index(this)+1;
				setNav.call(null,index)
				TS.call(null,index)
			})

			var TS=function(i){
				if(i==0){
					top.call(document,0),f.stop().animate({top:-50}, 500,function(){$(this).hide()})
				}else if(i==1){
					top.call(document,tH),f.css({display:'block'}).animate({top:0}, 500)
				}else if(i==section.length+1){
					var h=scrollTops(i,true);
					top.call(document,h)
				}else {
					var h=scrollTops(i);
					top.call(document,h)
				}
			},top=function(h){
				a('html,body').stop().animate({scrollTop:h},600)
			},setNav=function(i){
				if(i>=0 && i<2) {
					a('#navLi').find('li').removeClass('current');
					a('#navLi').find('li').eq(0).addClass('current')
				}else if(i>=section.length && i<section.length+2){
					a('#navLi').find('li').removeClass('current');
					a('#navLi').find('li').eq(section.length-1).addClass('current')
				}else {
					a('#navLi').find('li').removeClass('current');
					a('#navLi').find('li').eq(i-1).addClass('current')
				}
			},scrollTops=function(i,b){
				var obj=$('.section'+i);
				if (b) {
					if($('#footer').length > 0){
						return $('#footer').offset().top
					}
				}else if(obj.length >0){
					return obj.offset().top
				}
			},goPage=function(num){
				if (num>0) {
					index--;
					if(index<0){
						index = 0;
						return false
					}
				}else {
					index++;
					if(index> section.length+1){
						index = section.length+1;
						return false
					}
				}

				setNav.call(null,index)
				TS.call(b,index)
			}

			window.onresize=function(){
				var h=winH();
				setH(h),scrollTops(),TS(index)
			},a(document).on('keyup',function(e){
				if (e.keyCode == 40 || e.keyCode==39) {
					index++;
					if(index>=section.length+1) index=section.length+1
					TS.call(null,index),setNav(index)
				}else if(e.keyCode==37 || e.keyCode==38){
					index--;
					if (index<=0) index=0;
					TS.call(null,index),setNav(index)
				}
			})
			//console.log(section.length)


		})(jQuery,document)
	</script>
</body>
</html>